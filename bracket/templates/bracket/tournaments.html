{% extends 'bracket/layout.html' %}

{% block content %}

<p id="text"></p>
<div id="table-container"></div>
<script>
    fetch('/api/tournaments')
    .then(res => res.json())
    .then(
        result => {


        // Sample JSON data
        // Function to convert JSON to HTML table
        function jsonToTable(jsonData) {
            var table = document.createElement('table');
            var thead = document.createElement('thead');
            var tbody = document.createElement('tbody');

            // Create table header
            var headers = Object.keys(jsonData[0]);
            var headerRow = document.createElement('tr');
            headers.forEach(function (header) {
                var th = document.createElement('th');
                th.textContent = header;
                headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
            table.appendChild(thead);

            // Create table rows
            jsonData.forEach(function (obj) {
                var row = document.createElement('tr');
                headers.forEach(function (header) {
                    var cell = document.createElement('td');
                    cell.textContent = obj[header];
                    row.appendChild(cell);
                });
                tbody.appendChild(row);
            });
            table.appendChild(tbody);

            return table;
        }

        // Convert JSON to table and append to container
        var tableContainer = document.getElementById('table-container');
        tableContainer.appendChild(jsonToTable(result));

            
        }
    );
</script>

{% endblock %}